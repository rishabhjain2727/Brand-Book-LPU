<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LPU Brand Book – 100% Complete</title>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
  <style>
    :root {
      --primary: #f37021;          /* LPU orange-like */
      --secondary: #c65010;
      --accent: #4361ee;
      --light: #f8f9fa;
      --dark: #212529;
      --success: #4caf50;
      --warning: #f72585;
      --gray: #6c757d;
      --light-gray: #e9ecef;
      --border-radius: 8px;
      --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }

    html,
    body {
      height: 100%;
      overflow: hidden;
    }

    body {
      background-color: #f5f7fb;
      color: var(--dark);
      line-height: 1.6;
    }

    .container {
      display: flex;
      height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: 320px;
      background: white;
      box-shadow: var(--shadow);
      padding: 20px;
      overflow-y: auto;
      flex-shrink: 0;
    }

    .logo {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--light-gray);
    }

    .logo i {
      font-size: 24px;
      color: var(--primary);
      margin-right: 10px;
    }

    .logo h1 {
      font-size: 20px;
      font-weight: 700;
    }

    .small-note {
      font-size: 12px;
      color: var(--gray);
      margin-bottom: 15px;
    }

    .pillar-list {
      list-style: none;
    }

    .pillar-item {
      margin-bottom: 6px;
    }

    .pillar-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 12px;
      background-color: var(--light);
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
      font-weight: 600;
      font-size: 14px;
    }

    .pillar-header:hover {
      background-color: var(--light-gray);
    }

    .pillar-header.active {
      background-color: var(--primary);
      color: white;
    }

    .pillar-header i {
      font-size: 14px;
      transition: var(--transition);
    }

    .pillar-header.active i {
      transform: rotate(90deg);
    }

    .sub-pillars {
      list-style: none;
      max-height: 0;
      overflow: hidden;
      transition: var(--transition);
      padding-left: 10px;
    }

    .sub-pillars.show {
      max-height: 900px;
    }

    .sub-pillar {
      margin: 4px 0;
      padding: 8px 10px;
      border-left: 2px solid var(--light-gray);
      cursor: pointer;
      transition: var(--transition);
      font-size: 13px;
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .sub-pillar-main {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .sub-pillar-left {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .sub-pillar-summary {
      font-size: 11px;
      color: var(--gray);
      padding-left: 18px;
    }

    .sub-pillar:hover {
      border-left-color: var(--accent);
      background-color: rgba(72, 149, 239, 0.08);
    }

    .sub-pillar.active {
      border-left-color: var(--primary);
      background-color: rgba(243, 112, 33, 0.08);
      font-weight: 600;
    }

    .sub-pillar i {
      font-size: 11px;
      color: var(--gray);
    }

    .sub-pillar.active i {
      color: var(--primary);
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--light-gray);
    }

    .sub-pillar.completed .status-dot {
      background: var(--success);
    }

    /* Main content */
    .main-content {
      flex: 1;
      padding: 20px 28px;
      overflow-y: auto;
    }

    .content-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 16px;
      padding-bottom: 14px;
      border-bottom: 1px solid var(--light-gray);
    }

    .content-header h2 {
      font-size: 22px;
      color: var(--dark);
    }

    .content-sub {
      font-size: 13px;
      color: var(--gray);
    }

    /* Prominent completion graph */
    .progress-container {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 4px;
      padding: 10px 14px;
      background: linear-gradient(135deg, #f37021, #f9a826);
      border-radius: 10px;
      color: white;
      box-shadow: var(--shadow);
      min-width: 260px;
    }

    .progress-title {
      font-size: 12px;
      text-transform: uppercase;
      opacity: 0.9;
      letter-spacing: 0.06em;
    }

    .progress-main-num {
      font-size: 26px;
      font-weight: 700;
      line-height: 1.1;
    }

    .progress-bar {
      width: 280px;
      height: 14px;
      background-color: rgba(255, 255, 255, 0.25);
      border-radius: 14px;
      overflow: hidden;
    }

    .progress {
      height: 100%;
      background: linear-gradient(90deg, #ffffff, #d2f5dd);
      width: 0%;
      border-radius: 14px;
      transition: var(--transition);
    }

    .progress-text {
      font-size: 12px;
      font-weight: 500;
    }

    .form-container {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      padding: 20px 22px;
      margin-bottom: 18px;
      animation: fadeIn 0.3s ease;
    }

    .form-header h3 {
      font-size: 18px;
      color: var(--primary);
      margin-bottom: 4px;
    }

    .form-header p {
      font-size: 13px;
      color: var(--gray);
      margin-bottom: 14px;
    }

    .form-group {
      margin-bottom: 14px;
    }

    .form-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      color: var(--dark);
      font-size: 14px;
    }

    .form-group .hint {
      font-size: 12px;
      color: var(--gray);
      margin-top: 4px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 9px 11px;
      border: 1px solid var(--light-gray);
      border-radius: var(--border-radius);
      font-size: 14px;
      transition: var(--transition);
    }

    textarea {
      min-height: 110px;
      resize: vertical;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(72, 149, 239, 0.2);
    }

    .file-upload {
      border: 2px dashed var(--light-gray);
      border-radius: var(--border-radius);
      padding: 18px;
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
      font-size: 13px;
      color: var(--gray);
    }

    .file-upload i {
      font-size: 24px;
      margin-bottom: 6px;
      color: var(--gray);
    }

    .file-upload:hover {
      border-color: var(--accent);
      background-color: rgba(72, 149, 239, 0.05);
    }

    .swot-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    .swot-box {
      border-radius: var(--border-radius);
      border: 1px solid var(--light-gray);
      padding: 10px;
      background: var(--light);
    }

    .swot-box h4 {
      font-size: 13px;
      margin-bottom: 6px;
    }

    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 10px;
    }

    .btn {
      padding: 9px 16px;
      border-radius: var(--border-radius);
      border: none;
      font-size: 14px;
      cursor: pointer;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: var(--transition);
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: var(--secondary);
    }

    .btn-outline {
      border: 1px solid var(--primary);
      color: var(--primary);
      background: transparent;
    }

    .btn-outline:hover {
      background: rgba(243, 112, 33, 0.08);
    }

    .empty-state {
      text-align: center;
      color: var(--gray);
      padding: 60px 20px;
    }

    .empty-state i {
      font-size: 48px;
      margin-bottom: 12px;
      color: var(--light-gray);
    }

    /* Cohort chips (Target Audience) */
    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 8px;
    }

    .chip-toggle {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid var(--light-gray);
      background: #fff;
      font-size: 13px;
      cursor: pointer;
      transition: var(--transition);
    }

    .chip-toggle.active {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
    }

    .radio-row {
      display: flex;
      gap: 16px;
      font-size: 13px;
      margin-bottom: 8px;
    }

    .radio-row label {
      font-weight: 400;
    }

    .selected-tags {
      min-height: 40px;
      padding: 8px;
      border-radius: var(--border-radius);
      border: 1px dashed var(--light-gray);
      font-size: 13px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .tag-pill {
      padding: 4px 10px;
      background: var(--light);
      border-radius: 999px;
      font-size: 12px;
    }

    /* ====== NEW: MARKET POSITION MAP STYLES ====== */
    .market-map-layout {
      display: flex;
      flex-wrap: wrap;
      gap: 18px;
      align-items: flex-start;
    }

    .market-map-controls {
      flex: 1 1 260px;
      min-width: 250px;
    }

    .market-map-controls table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    .market-map-controls th,
    .market-map-controls td {
      padding: 6px 4px;
      text-align: left;
    }

    .market-map-controls th {
      font-weight: 600;
      color: var(--gray);
    }

    .market-map-controls input[type="range"] {
      width: 100%;
    }

    .market-map-wrapper {
      flex: 0 0 320px;
      max-width: 380px;
    }

    .market-map {
      position: relative;
      width: 100%;
      aspect-ratio: 1/1;
      border-radius: var(--border-radius);
      border: 1px solid var(--light-gray);
      background: #fff;
      background-image:
        linear-gradient(to right, var(--light-gray) 1px, transparent 1px),
        linear-gradient(to bottom, var(--light-gray) 1px, transparent 1px);
      background-size: 50% 100%, 100% 50%;
      overflow: hidden;
    }

    .market-axis-label {
      position: absolute;
      font-size: 11px;
      color: var(--gray);
    }

    .market-axis-label.x-left {
      left: 8px;
      bottom: 4px;
    }

    .market-axis-label.x-right {
      right: 8px;
      bottom: 4px;
      text-align: right;
    }

    .market-axis-label.y-bottom {
      left: 8px;
      bottom: 8px;
      transform-origin: left bottom;
    }

    .market-axis-label.y-top {
      left: 8px;
      top: 8px;
      transform-origin: left top;
    }

    .map-dot {
      position: absolute;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      border: 2px solid #fff;
      box-shadow: 0 0 0 2px rgba(0,0,0,0.06);
      transform: translate(-50%, -50%);
    }

    .map-dot--lpu {
      background: var(--primary);
    }

    .map-dot--comp-a {
      background: var(--accent);
    }

    .map-dot--comp-b {
      background: var(--warning);
    }

    .map-dot-label {
      position: absolute;
      transform: translate(-50%, 12px);
      font-size: 11px;
      color: var(--dark);
      white-space: nowrap;
    }

    /* ====== NEW: INDUSTRY BENCHMARK STYLES ====== */
    .benchmark-layout {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .benchmark-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    .benchmark-table th,
    .benchmark-table td {
      padding: 6px 8px;
      border-bottom: 1px solid var(--light-gray);
    }

    .benchmark-table th {
      text-align: left;
      color: var(--gray);
      font-weight: 600;
    }

    .benchmark-table input[type="number"] {
      width: 100%;
    }

    .benchmark-chart {
      border-radius: var(--border-radius);
      border: 1px solid var(--light-gray);
      padding: 10px 12px;
      background: var(--light);
    }

    .benchmark-chart-row {
      margin-bottom: 10px;
    }

    .benchmark-chart-row:last-child {
      margin-bottom: 0;
    }

    .benchmark-chart-label {
      font-size: 12px;
      margin-bottom: 4px;
      color: var(--gray);
    }

    .benchmark-bar-track {
      width: 100%;
      height: 16px;
      background: #fff;
      border-radius: 999px;
      overflow: hidden;
      display: flex;
    }

    .benchmark-bar {
      height: 100%;
      transition: width 0.25s ease;
    }

    .benchmark-bar--lpu {
      background: var(--primary);
    }

    .benchmark-bar--comp {
      background: var(--accent);
    }

    .benchmark-legend {
      display: flex;
      gap: 14px;
      font-size: 11px;
      margin-top: 6px;
      color: var(--gray);
    }

    .legend-swatch {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      display: inline-block;
      margin-right: 4px;
    }

    @media (max-width: 992px) {
      .container {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        max-height: 40vh;
      }

      .progress-bar {
        width: 220px;
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(6px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- SIDEBAR -->
    <div class="sidebar">
      <div class="logo">
        <i class="fas fa-graduation-cap"></i>
        <h1>LPU Brand Book</h1>
      </div>
      <p class="small-note">
        All pillars & sub-pillars are present and marked as completed for this
        LPU brand book.
      </p>
      <ul class="pillar-list" id="pillarList"></ul>
    </div>

    <!-- MAIN -->
    <div class="main-content">
      <div class="content-header">
        <div>
          <h2 id="sectionTitle">Brand History</h2>
          <p id="sectionSubtitle" class="content-sub">Brand Overview</p>
        </div>
        <div class="progress-container">
          <div class="progress-title">Brand Book Completion</div>
          <div class="progress-main-num" id="progressPercent">0%</div>
          <div class="progress-bar">
            <div class="progress" id="progressBar"></div>
          </div>
          <span class="progress-text" id="progressText"></span>
        </div>
      </div>

      <div id="formRoot"></div>
    </div>
  </div>

  <script>
    // -------- CONFIG FOR LPU BRAND --------
    // type: 'short', 'long', 'upload', 'swot', 'color', 'table', 'cohort'
    const BRAND_STRUCTURE = [
      /* ------------- whole BRAND_STRUCTURE unchanged ------------- */
      /*   (same as you pasted; omitted here for brevity)            */
      /*   MAKE SURE YOU KEEP THE FULL BRAND_STRUCTURE IN YOUR FILE  */
    ];
    // NOTE: For this ChatGPT message length, I'm not repeating BRAND_STRUCTURE
    // again. In your actual code, keep the exact BRAND_STRUCTURE you already have.

    // ---------- STATE ----------
    const completionState = {};
    BRAND_STRUCTURE.forEach(p =>
      p.sections.forEach(sec => {
        completionState[sec.id] = true; // pre-mark all as completed
      })
    );
    const totalSections = BRAND_STRUCTURE.reduce(
      (sum, p) => sum + p.sections.length,
      0
    );

    // ---------- DOM REFS ----------
    const pillarListEl = document.getElementById("pillarList");
    const formRoot = document.getElementById("formRoot");
    const sectionTitleEl = document.getElementById("sectionTitle");
    const sectionSubtitleEl = document.getElementById("sectionSubtitle");
    const progressBarEl = document.getElementById("progressBar");
    const progressTextEl = document.getElementById("progressText");
    const progressPercentEl = document.getElementById("progressPercent");

    // ---------- SIDEBAR RENDER ----------
    function renderSidebar() {
      pillarListEl.innerHTML = "";
      BRAND_STRUCTURE.forEach((pillar, idx) => {
        const li = document.createElement("li");
        li.className = "pillar-item";

        const header = document.createElement("div");
        header.className = "pillar-header" + (idx === 0 ? " active" : "");
        header.dataset.pillarId = pillar.id;
        header.innerHTML = `
          <span>${pillar.label}</span>
          <i class="fas fa-chevron-right"></i>
        `;

        const subList = document.createElement("ul");
        subList.className = "sub-pillars" + (idx === 0 ? " show" : "");
        pillar.sections.forEach((sec, sIdx) => {
          const subLi = document.createElement("li");
          subLi.className =
            "sub-pillar" +
            (idx === 0 && sIdx === 0 ? " active completed" : " completed");
          subLi.dataset.sectionId = sec.id;
          const summaryText =
            sec.hint || "Click to edit details for this section.";

          subLi.innerHTML = `
            <div class="sub-pillar-main">
              <div class="sub-pillar-left">
                <i class="fas fa-circle-notch"></i>
                <span>${sec.label}</span>
              </div>
              <span class="status-dot"></span>
            </div>
            <div class="sub-pillar-summary">${summaryText}</div>
          `;
          subList.appendChild(subLi);
        });

        li.appendChild(header);
        li.appendChild(subList);
        pillarListEl.appendChild(li);
      });

      // turn status dots green
      document
        .querySelectorAll(".sub-pillar.completed .status-dot")
        .forEach(dot => {
          dot.style.background = "var(--success)";
        });

      bindSidebarEvents();
    }

    function bindSidebarEvents() {
      document.querySelectorAll(".pillar-header").forEach((header) => {
        header.addEventListener("click", () => {
          document.querySelectorAll(".pillar-header").forEach((h) => {
            if (h !== header) {
              h.classList.remove("active");
              h.nextElementSibling.classList.remove("show");
            }
          });
          header.classList.toggle("active");
          header.nextElementSibling.classList.toggle("show");
        });
      });

      document.querySelectorAll(".sub-pillar").forEach((sub) => {
        sub.addEventListener("click", () => {
          const sectionId = sub.dataset.sectionId;
          document
            .querySelectorAll(".sub-pillar")
            .forEach((s) => s.classList.remove("active"));
          sub.classList.add("active");
          const section = findSectionById(sectionId);
          if (section) renderSectionForm(section);
        });
      });
    }

    function findSectionById(id) {
      for (const pillar of BRAND_STRUCTURE) {
        for (const sec of pillar.sections) {
          if (sec.id === id) return { pillar, sec };
        }
      }
      return null;
    }

    // ---------- RENDER SECTION FORM ----------
    function renderSectionForm({ pillar, sec }) {
      sectionTitleEl.textContent = sec.label;
      sectionSubtitleEl.textContent = pillar.label;

      const container = document.createElement("div");
      container.className = "form-container";

      const header = document.createElement("div");
      header.className = "form-header";
      header.innerHTML = `
        <h3>${sec.label}</h3>
        <p>${sec.hint || "Edit the pre-filled LPU content for this section if needed."}</p>
      `;
      container.appendChild(header);

      const formBody = document.createElement("div");

      switch (sec.type) {
        case "short":
          formBody.appendChild(makeShortField(sec));
          break;
        case "upload":
          // SPECIAL: Market Position Map graphic
          if (sec.id === "market-position-map") {
            formBody.appendChild(makeMarketPositionField(sec));
          } else {
            formBody.appendChild(makeUploadField());
          }
          break;
        case "table":
          // SPECIAL: Industry Benchmarks chart
          if (sec.id === "industry-benchmarks") {
            formBody.appendChild(makeBenchmarkField(sec));
          } else {
            formBody.appendChild(makeTableField(sec));
          }
          break;
        case "swot":
          formBody.appendChild(makeSwotField());
          break;
        case "color":
          formBody.appendChild(makeColorField());
          break;
        case "cohort":
          formBody.appendChild(makeCohortField());
          break;
        case "long":
        default:
          formBody.appendChild(makeLongField(sec));
          break;
      }

      container.appendChild(formBody);

      const actions = document.createElement("div");
      actions.className = "form-actions";
      actions.innerHTML = `
        <button class="btn btn-outline" type="button">
          <i class="fas fa-rotate-left"></i> Reset (demo)
        </button>
        <button class="btn btn-primary" type="button">
          Section Saved <i class="fas fa-check"></i>
        </button>
      `;
      container.appendChild(actions);

      formRoot.innerHTML = "";
      formRoot.appendChild(container);

      container.addEventListener("click", (e) => {
        if (e.target.classList.contains("chip-toggle")) {
          e.target.classList.toggle("active");
        }
      });
    }

    // ---------- FIELD BUILDERS ----------
    function makeShortField(sec) {
      const wrapper = document.createElement("div");
      wrapper.className = "form-group";
      wrapper.innerHTML = `
        <label>${sec.label}</label>
        <input type="text" value="${sec.content || ""}" />
      `;
      return wrapper;
    }

    function makeLongField(sec) {
      const wrapper = document.createElement("div");
      wrapper.className = "form-group";
      const content = sec.content || "";
      wrapper.innerHTML = `
        <label>${sec.label}</label>
        <textarea>${content}</textarea>
        <div class="hint">Pre-filled for LPU – you can edit this text.</div>
      `;
      return wrapper;
    }

    function makeUploadField() {
      const wrapper = document.createElement("div");
      wrapper.className = "form-group";
      wrapper.innerHTML = `
        <label>Upload Asset (Placeholder)</label>
        <div class="file-upload">
          <i class="fas fa-cloud-upload-alt"></i>
          <p>Click to simulate uploading an image/file</p>
        </div>
        <div class="hint">Replace this with a real file input when you integrate the backend.</div>
      `;
      wrapper.querySelector(".file-upload").addEventListener("click", (e) => {
        e.currentTarget.innerHTML =
          '<i class="fas fa-check-circle"></i><p>File uploaded (demo)</p>';
        e.currentTarget.style.borderColor = "var(--accent)";
        e.currentTarget.style.backgroundColor = "rgba(72,149,239,0.08)";
      });
      return wrapper;
    }

    function makeTableField(sec) {
      const wrapper = document.createElement("div");
      wrapper.className = "form-group";
      const note =
        sec.content ||
        "Use this structured grid to list points, comparisons or internal vs external applications.";
      wrapper.innerHTML = `
        <label>${sec.label}</label>
        <div class="swot-grid">
          <div class="swot-box">
            <h4>Item 1</h4>
            <textarea placeholder="Describe item 1"></textarea>
          </div>
          <div class="swot-box">
            <h4>Item 2</h4>
            <textarea placeholder="Describe item 2"></textarea>
          </div>
          <div class="swot-box">
            <h4>Item 3</h4>
            <textarea placeholder="Describe item 3"></textarea>
          </div>
          <div class="swot-box">
            <h4>Item 4</h4>
            <textarea placeholder="Describe item 4"></textarea>
          </div>
        </div>
        <div class="hint">${note}</div>
      `;
      return wrapper;
    }

    function makeSwotField() {
      const wrapper = document.createElement("div");
      wrapper.className = "form-group";
      wrapper.innerHTML = `
        <label>SWOT Analysis</label>
        <div class="swot-grid">
          <div class="swot-box">
            <h4>Strengths</h4>
            <textarea placeholder="Internal positive attributes of LPU"></textarea>
          </div>
          <div class="swot-box">
            <h4>Weaknesses</h4>
            <textarea placeholder="Internal challenges or gaps"></textarea>
          </div>
          <div class="swot-box">
            <h4>Opportunities</h4>
            <textarea placeholder="External trends or opportunities"></textarea>
          </div>
          <div class="swot-box">
            <h4>Threats</h4>
            <textarea placeholder="External risks or competition"></textarea>
          </div>
        </div>
      `;
      return wrapper;
    }

    function makeColorField() {
      const wrapper = document.createElement("div");
      wrapper.className = "form-group";
      wrapper.innerHTML = `
        <label>Primary / Secondary Color (Demo)</label>
        <input type="color" value="#F37021" />
        <div class="hint">Approximate LPU orange – confirm exact values with official brand team.</div>
      `;
      return wrapper;
    }

    function makeCohortField() {
      const wrapper = document.createElement("div");
      wrapper.innerHTML = `
        <div class="form-group">
          <label>Audience Details – Example Cohorts for LPU</label>
          <div class="hint">Toggle chips to visualise typical LPU student segments.</div>
        </div>

        <div class="form-group">
          <label>Age</label>
          <div class="chip-row">
            <button type="button" class="chip-toggle active">18–24 Years</button>
            <button type="button" class="chip-toggle">25–34 Years</button>
          </div>
        </div>

        <div class="form-group">
          <label>Gender</label>
          <div class="chip-row">
            <button type="button" class="chip-toggle active">Male</button>
            <button type="button" class="chip-toggle active">Female</button>
            <button type="button" class="chip-toggle">Others</button>
          </div>
        </div>

        <div class="form-group">
          <label>Parental Status</label>
          <div class="chip-row">
            <button type="button" class="chip-toggle active">Not a Parent</button>
            <button type="button" class="chip-toggle">Parent</button>
          </div>
        </div>

        <div class="form-group">
          <label>Household Income (Illustrative)</label>
          <div class="chip-row">
            <button type="button" class="chip-toggle active">CAT-A (0–5L)</button>
            <button type="button" class="chip-toggle active">CTA-B (5–10L)</button>
            <button type="button" class="chip-toggle">MIG (10–20L)</button>
            <button type="button" class="chip-toggle">HIG (20L+)</button>
          </div>
        </div>

        <hr style="border:none;border-top:1px solid var(--light-gray);margin:16px 0;">

        <div class="form-group">
          <label>Locations</label>
          <div class="radio-row">
            <label><input type="radio" name="locMode" checked /> India (Tier-2/3 focus)</label>
            <label><input type="radio" name="locMode" /> International (Africa, South-Asia, etc.)</label>
          </div>
          <input type="text" placeholder="Add specific states, cities or countries for this cohort">
        </div>

        <div class="form-group">
          <label>Interest</label>
          <input type="text" placeholder="e.g., Engineering, Management, Design, Study Abroad">
        </div>

        <div class="form-group">
          <label>Selected Interests (Example)</label>
          <div class="selected-tags">
            <span class="tag-pill">Engineering</span>
            <span class="tag-pill">Management</span>
            <span class="tag-pill">International exposure</span>
          </div>
        </div>
      `;
      return wrapper;
    }

    /* ====== NEW: MARKET POSITION MAP (GRAPHICAL) ====== */
    function makeMarketPositionField(sec) {
      const wrapper = document.createElement("div");
      wrapper.className = "form-group";
      wrapper.innerHTML = `
        <label>${sec.label}</label>
        <div class="market-map-layout">
          <div class="market-map-controls">
            <table>
              <thead>
                <tr>
                  <th>Brand</th>
                  <th style="width:45%">Traditional → Future-focused</th>
                  <th style="width:45%">Local → Global</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>LPU</strong></td>
                  <td>
                    <input type="range" min="0" max="100" value="0"
                      data-map-brand="lpu" data-axis="x">
                  </td>
                  <td>
                    <input type="range" min="0" max="100" value="0"
                      data-map-brand="lpu" data-axis="y">
                  </td>
                </tr>
                <tr>
                  <td>Competitor A</td>
                  <td>
                    <input type="range" min="0" max="100" value="0"
                      data-map-brand="comp-a" data-axis="x">
                  </td>
                  <td>
                    <input type="range" min="0" max="100" value="0"
                      data-map-brand="comp-a" data-axis="y">
                  </td>
                </tr>
                <tr>
                  <td>Competitor B</td>
                  <td>
                    <input type="range" min="0" max="100" value="0"
                      data-map-brand="comp-b" data-axis="x">
                  </td>
                  <td>
                    <input type="range" min="0" max="100" value="0"
                      data-map-brand="comp-b" data-axis="y">
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="hint">
              Set real positions (0–100) for each axis using actual perception or research data.
            </div>
          </div>

          <div class="market-map-wrapper">
            <div class="market-map">
              <div class="market-axis-label x-left">Traditional</div>
              <div class="market-axis-label x-right">Future-focused</div>
              <div class="market-axis-label y-bottom">Local</div>
              <div class="market-axis-label y-top">Global</div>

              <div class="map-dot map-dot--lpu" data-point="lpu"></div>
              <div class="map-dot-label" data-point-label="lpu">LPU</div>

              <div class="map-dot map-dot--comp-a" data-point="comp-a"></div>
              <div class="map-dot-label" data-point-label="comp-a">Comp A</div>

              <div class="map-dot map-dot--comp-b" data-point="comp-b"></div>
              <div class="map-dot-label" data-point-label="comp-b">Comp B</div>
            </div>
          </div>
        </div>
      `;

      const ranges = wrapper.querySelectorAll('input[type="range"][data-map-brand]');
      const updatePoints = () => {
        const values = {
          "lpu": { x: 0, y: 0 },
          "comp-a": { x: 0, y: 0 },
          "comp-b": { x: 0, y: 0 }
        };
        ranges.forEach(r => {
          const b = r.dataset.mapBrand;
          const axis = r.dataset.axis;
          values[b][axis] = Number(r.value);
        });
        Object.keys(values).forEach(b => {
          const dot = wrapper.querySelector(`.map-dot[data-point="${b}"]`);
          const label = wrapper.querySelector(`.map-dot-label[data-point-label="${b}"]`);
          const { x, y } = values[b];
          const left = x;             // 0–100%
          const top = 100 - y;        // invert so higher y goes up
          dot.style.left = left + "%";
          dot.style.top = top + "%";
          label.style.left = left + "%";
          label.style.top = (top) + "%";
        });
      };

      ranges.forEach(r => r.addEventListener("input", updatePoints));
      updatePoints();

      return wrapper;
    }

    /* ====== NEW: INDUSTRY BENCHMARKS (BAR CHART) ====== */
    function makeBenchmarkField(sec) {
      const wrapper = document.createElement("div");
      wrapper.className = "form-group";
      wrapper.innerHTML = `
        <label>${sec.label}</label>
        <div class="benchmark-layout">
          <table class="benchmark-table">
            <thead>
              <tr>
                <th>Metric</th>
                <th style="width:26%">LPU</th>
                <th style="width:26%">Competitor</th>
                <th style="width:22%">Unit</th>
              </tr>
            </thead>
            <tbody>
              <tr data-metric="placements">
                <td>Placement Rate</td>
                <td><input type="number" min="0" max="100" value="0" data-bench="lpu"></td>
                <td><input type="number" min="0" max="100" value="0" data-bench="comp"></td>
                <td>% of eligible students placed</td>
              </tr>
              <tr data-metric="nirf">
                <td>NIRF Score</td>
                <td><input type="number" min="0" max="100" value="0" data-bench="lpu"></td>
                <td><input type="number" min="0" max="100" value="0" data-bench="comp"></td>
                <td>0–100 score</td>
              </tr>
              <tr data-metric="intl">
                <td>International Students</td>
                <td><input type="number" min="0" value="0" data-bench="lpu"></td>
                <td><input type="number" min="0" value="0" data-bench="comp"></td>
                <td>Count per year</td>
              </tr>
              <tr data-metric="infra">
                <td>Infrastructure Index</td>
                <td><input type="number" min="0" max="10" value="0" data-bench="lpu"></td>
                <td><input type="number" min="0" max="10" value="0" data-bench="comp"></td>
                <td>0–10 internal index</td>
              </tr>
            </tbody>
          </table>

          <div class="benchmark-chart" data-benchmark-chart>
            <div class="benchmark-chart-row" data-metric-row="placements">
              <div class="benchmark-chart-label">Placement Rate</div>
              <div class="benchmark-bar-track">
                <div class="benchmark-bar benchmark-bar--lpu" data-bar="placements-lpu" style="width:0%"></div>
                <div class="benchmark-bar benchmark-bar--comp" data-bar="placements-comp" style="width:0%"></div>
              </div>
            </div>

            <div class="benchmark-chart-row" data-metric-row="nirf">
              <div class="benchmark-chart-label">NIRF Score</div>
              <div class="benchmark-bar-track">
                <div class="benchmark-bar benchmark-bar--lpu" data-bar="nirf-lpu" style="width:0%"></div>
                <div class="benchmark-bar benchmark-bar--comp" data-bar="nirf-comp" style="width:0%"></div>
              </div>
            </div>

            <div class="benchmark-chart-row" data-metric-row="intl">
              <div class="benchmark-chart-label">International Students</div>
              <div class="benchmark-bar-track">
                <div class="benchmark-bar benchmark-bar--lpu" data-bar="intl-lpu" style="width:0%"></div>
                <div class="benchmark-bar benchmark-bar--comp" data-bar="intl-comp" style="width:0%"></div>
              </div>
            </div>

            <div class="benchmark-chart-row" data-metric-row="infra">
              <div class="benchmark-chart-label">Infrastructure Index</div>
              <div class="benchmark-bar-track">
                <div class="benchmark-bar benchmark-bar--lpu" data-bar="infra-lpu" style="width:0%"></div>
                <div class="benchmark-bar benchmark-bar--comp" data-bar="infra-comp" style="width:0%"></div>
              </div>
            </div>

            <div class="benchmark-legend">
              <span><span class="legend-swatch" style="background:var(--primary)"></span> LPU</span>
              <span><span class="legend-swatch" style="background:var(--accent)"></span> Competitor</span>
            </div>
            <div class="hint">
              Enter real benchmark values above – bars will scale automatically relative
              to the highest value in each metric.
            </div>
          </div>
        </div>
      `;

      const rows = wrapper.querySelectorAll("tbody tr[data-metric]");
      const updateBars = () => {
        rows.forEach(row => {
          const metric = row.dataset.metric;
          const lpuVal = Number(row.querySelector('input[data-bench="lpu"]').value) || 0;
          const compVal = Number(row.querySelector('input[data-bench="comp"]').value) || 0;
          const maxVal = Math.max(lpuVal, compVal, 1); // avoid divide by zero

          const lpuBar = wrapper.querySelector(`[data-bar="${metric}-lpu"]`);
          const compBar = wrapper.querySelector(`[data-bar="${metric}-comp"]`);

          lpuBar.style.width = (lpuVal / maxVal * 100) + "%";
          compBar.style.width = (compVal / maxVal * 100) + "%";
        });
      };

      rows.forEach(row => {
        row.querySelectorAll("input").forEach(inp => {
          inp.addEventListener("input", updateBars);
        });
      });
      updateBars();

      return wrapper;
    }

    // ---------- COMPLETION ----------
    function updateCompletionUI() {
      const completed = Object.keys(completionState).length;
      const percent = 100; // fixed at 100% because everything is pre-completed
      progressBarEl.style.width = percent + "%";
      progressTextEl.textContent = `${percent}% Complete (${completed} / ${totalSections} sections)`;
      progressPercentEl.textContent = `${percent}%`;
    }

    // ---------- INIT ----------
    renderSidebar();
    updateCompletionUI();

    // open first section (Brand History) by default
    const firstPillar = BRAND_STRUCTURE[0];
    const firstSec = firstPillar.sections[0];
    renderSectionForm({ pillar: firstPillar, sec: firstSec });
  </script>
</body>
</html>
